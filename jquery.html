<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JQuery</title>
    <link rel="stylesheet" href="dest/style.min.css">
    <link rel="stylesheet" href="dest/fonts.css">
</head>
<body>
    <header class="header">
        <div class="container-fluid">
            <div class="menu-hambeger">
                <div class="button">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <span class="text">Menu</span>
            </div>
            <div class="logo">
                <a href="https://www.cfdtraining.vn/"><img src="/themes/cfd-training/img/logo.svg" alt=""></a>
            </div>
            <div class="right">
                <div class="login">
                    <a href="btn-login">Đăng Nhập</a>
                    <a href="btn-register">Đăng Ký</a>
                </div>
            </div>
        </div>
    </header>
    <main class="jquery">
        <section class="pd">
            <div class="container">
                <h2 class="title">accordion</h2>
                <div class="accordion">
                    <div class="accordion__title">Thêm 80 ca Covid-19 trong nước</div>
                    <div class="content">
                        Bộ Y tế trưa 4/6 ghi nhận 80 ca dương tính tại Bắc Giang 44, Bắc Ninh 23, TP HCM 11, Hà Nội 2. Như vậy từ sáng đến trưa nay, thêm 132 ca nhiễm được Bộ Y tế công bố. Tổng số ca nhiễm cộng đồng từ ngày 27/4 đến nay lên 5.088, ghi nhận ở 37 tỉnh thành.
                    </div>
                </div>
                <div class="accordion">
                    <div class="accordion__title">Bộ Y tế mua vaccine Covid-19 Johnson & Johnson</div>
                    <div class="content">
                        Sáng 4/6, Bộ trưởng Y tế Nguyễn Thanh Long làm việc trực tuyến với đại diện hãng dược Johnson & Johnson về việc nhập khẩu vaccine Covid-19 tại Việt Nam.
                    </div>
                </div>
                <div class="accordion">
                    <div class="accordion__title">Việt Nam có 78% vào vòng loại cuối World Cup</div>
                    <div class="content">
                        Theo trang We Global, khả năng đi tiếp của đội tuyển Việt Nam tăng thêm 4% sau loạt trận vừa qua ở vòng loại thứ hai World Cup 2022.
                    </div>
                </div>
                <div class="accordion">
                    <div class="accordion__title">Bệnh nhân 22 tuổi Long An đông đặc phổi trái</div>
                    <div class="content">
                        Tiến sĩ Nguyễn Văn Vĩnh Châu, Giám đốc Bệnh viện Bệnh Nhiệt đới TP HCM, ngày 4/6, cho biết bệnh nhân bị rối loạn đông máu, khả năng do có tình trạng đông máu nội mạch lan tỏa.
                    </div>
                </div>
            </div>
        </section>
        <section>
            <div class="container">
                <h2 class="title">Tabs</h2>
                <div class="tabs">
                    <ul class="nav">
                        <li><a class="active" href="">Điện Thoại</a></li>
                        <li><a href="">Máy Ảnh</a></li>
                        <li><a href="">Hàng Tiêu Dùng</a></li>
                    </ul>
                    <div class="tabs__content">
                        <div class="panel active">
                            <div class="image">
                                <img src="img/dienthoai1.jpg" alt="">
                                <img src="img/dienthoai2.jpg" alt="">
                                <img src="img/dienthoai3.jpg" alt="">
                                <img src="img/dienthoai4.jpg" alt="">
                            </div>
                        </div>
                        <div class="panel">
                            <div class="image">
                                <img src="img/mayanh1.jpg" alt="">
                                <img src="img/mayanh2.jpg" alt="">
                                <img src="img/mayanh3.jpg" alt="">
                                <img src="img/mayanh4.jpg" alt="">
                            </div>
                        </div>
                        <div class="panel">
                            <div class="image">
                                <img src="img/img1.jpg" alt="">
                                <img src="img/img2.jpg" alt="">
                                <img src="img/img3.jpg" alt="">
                                <img src="img/img4.jpg" alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="pd">
            <div class="container">
                <h2 class="title">Tags</h2>
                <div class="tags">
                    <div class="list">
                        <div class="tag">
                            test
                            <span class="remove">x</span>
                        </div>
                        <input type="text" name="tabs">
                    </div>
                </div>
            </div>
        </section>
        <section>
            <div class="container">
                <h2 class="title">Form Contact</h2>
                <form action="" id="form-contact">
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" name="name" class="form-control">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="text" name="email" class="form-control">
                    </div>
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="number" name="telephone" class="form-control">
                    </div>
                    <div class="form-group">
                        <label>Tỉnh Thành</label>
                        <select name="region" id="" class="form-control">
                            <option value="">Chọn Tỉnh Thành</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Quận/Huyện</label>
                        <select name="city" id="" class="form-control">
                            <option value="">Chọn Huyện</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Phường/Xã</label>
                        <select name="ward" id="" class="form-control">
                            <option value="">Chọn Xã</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Content</label>
                        <textarea name="content" class="form-control content" rows="8"></textarea>
                    </div>
                    <button type="button" class="btn">Submit</button>
                </form>
            </div>
        </section>
    </main>

    <script src="dest/jsmain.min.js"></script>
    <script>
        // -----------------------
        // Bài tập JQuery
        // Accordion
        $(document).ready(function(){
            $(document).on('click', '.jquery .accordion .accordion__title', function(){
                $('.accordion .accordion__title').not($(this)).removeClass('active'); 
                $('.accordion .content').not($(this).next()).slideUp();
                $(this).next().slideToggle();
                $(this).toggleClass('active');  
            });
            // Tabs
            let panel = $('.tabs .tabs__content .panel');

            $(document).on('click', '.tabs .nav li a', function(e){
                e.preventDefault();
                $('.tabs .nav li a').removeClass('active');
                $(this).addClass('active');
                let index = $(this).parent().index();
                let itemPanel = panel.eq(index);
                panel.removeClass('active');
                itemPanel.addClass('active');
            });

            // From Contact
            $("#form-contact .btn").click(function(){
                let name = $("input[name='name']").val();
                let email = $("input[name='email']").val();
                let telephone = $("input[name='telephone']").val();
                let content = $("textarea[name='content']").val();

                let errors = {
                    name: [],
                    email: [],
                    telephone: [],
                };

                if(name == ''){
                    errors.name.push('Name cannot be left blank');
                } else {
                    if(name.length < 2){
                        errors.name.push('Name cannot be less than 2 characters');
                    }
                }
                if(email == ''){
                    errors.email.push('Email cannot be left blank');
                } else {
                    if(!isEmail(email)){
                        errors.email.push('Email syntax is incorrect');
                    }
                }
                if(telephone == ''){
                    errors.telephone.push('Phone number cannot be left blank');
                } else {
                    if(telephone.length < 10 || telephone.length > 11){
                        errors.telephone.push('Phone only 10 to 11 numbers can be entered');
                    }
                }
                let success = true;
                for(let index in errors){
                    $(`input[name=${index}]`).parent().find('.error').remove();
                    if(errors[index].length > 0){
                        success = false;
                        let htmlError = `<div class="error">${errors[index]}</div>`;
                        $(`input[name=${index}]`).parent().append(htmlError);
                    }
                }
                if(success == true){
                    alert('Success')
                }

                function isEmail(checkEmail){
                    if (/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(checkEmail)){
                        return true;
                    } return false;
                }
            });

            // ajax
            $.ajax({
                method: 'GET',
                url: 'http://zuzo.xyz/api/v1/regions',
                success: function(response){
                    response.data.forEach(function(item){
                        let option = `<option value="${item.id}">${item.name}</option>`;
                        $("select[name='region']").append(option);
                    });
                }
            });
            $("select[name='region']").change(function(){
                let regionId = $(this).val();
                $.ajax({
                    method: 'GET',
                    url: 'http://zuzo.xyz/api/v1/regions/' + regionId + '/cities',
                    success: function(response){
                        $("select[name='city']").empty();
                        response.data.forEach(function(item){
                            let option = `<option value="${item.id}">${item.name}</option>`;
                            $("select[name='city']").append(option);
                        });
                    }
                });
                $("select[name='city']").change(function(){
                let cityId = $(this).val();
                $.ajax({
                    method: 'GET',
                    url: 'http://zuzo.xyz/api/v1/cities/' + cityId + '/wards',
                    success: function(response){
                        $("select[name='ward']").empty();
                        response.data.forEach(function(item){
                            let option = `<option value="${item.id}">${item.name}</option>`;
                            $("select[name='ward']").append(option);
                        });
                    }
                });
            });
            });
        });
        
    </script>
</body>
</html>